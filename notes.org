* Tasks
** TODO format error

#+BEGIN_QUOTE
Debugger entered--Lisp error: (error "Not enough arguments for format string")
  format-message("Unknown error occurred sending request to matrix homeserver: %S")
  apply(format-message "Unknown error occurred sending request to matrix homeserver: %S" nil)
  warn("Unknown error occurred sending request to matrix homeserver: %S")
  (let ((exit-code (matrix-parse-curl-exit-code (cdr error-thrown)))) (warn (cond ((memq exit-code (quote (60 51))) (let nil "Error sending request to matrix homeserver, SSL certificate is invalid")) ((null exit-code) (let nil "Unknown error occurred sending request to matrix homeserver: %S")) (t (let nil (format "Matrix request exited with exit code %d" exit-code))))))
  (progn (let ((--dolist-tail-- matrix-error-hook) handler) (while --dolist-tail-- (setq handler (car --dolist-tail--)) (funcall handler con symbol-status error-thrown) (setq --dolist-tail-- (cdr --dolist-tail--)))) (let ((exit-code (matrix-parse-curl-exit-code (cdr error-thrown)))) (warn (cond ((memq exit-code (quote (60 51))) (let nil "Error sending request to matrix homeserver, SSL certificate is invalid")) ((null exit-code) (let nil "Unknown error occurred sending request to matrix homeserver: %S")) (t (let nil (format "Matrix request exited with exit code %d" exit-code)))))))
  (let* ((error-thrown (car (cdr (plist-member args (quote :error-thrown))))) (symbol-status (car (cdr (plist-member args (quote :symbol-status)))))) (progn (let ((--dolist-tail-- matrix-error-hook) handler) (while --dolist-tail-- (setq handler (car --dolist-tail--)) (funcall handler con symbol-status error-thrown) (setq --dolist-tail-- (cdr --dolist-tail--)))) (let ((exit-code (matrix-parse-curl-exit-code (cdr error-thrown)))) (warn (cond ((memq exit-code (quote ...)) (let nil "Error sending request to matrix homeserver, SSL certificate is invalid")) ((null exit-code) (let nil "Unknown error occurred sending request to matrix homeserver: %S")) (t (let nil (format "Matrix request exited with exit code %d" exit-code))))))))
  matrix-request-error-handler([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #0 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil (("@carmike:matrix.org" (avatar_url) (displayname . "Michael") (membership . "join")) ("@alphapapa:matrix.org" (avatar_url) (displayname . "alphapapa") (membership . "join"))) nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #0 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil (("@alphapapa:matrix.org" (avatar_url) (displayname . "alphapapa") (membership . "join")) ("@baneross:matrix.org" (avatar_url . "mxc://matrix.org/WWPKfhaIJxXLYXUqJtDmrsVm") (displayname . "Bane Ross") (membership . "join"))) nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog (#0) apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446] :data nil :symbol-status error :error-thrown (error http 502) :response [cl-struct-request-response 502 nil nil (error http 502) error "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" nil (:type "GET" :params (("access_token" . "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK") ("since" . "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436") ("timeout" . "30000") ("full_state" . "false")) :parser json-read :data "null" :error #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil ... nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil ... nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :headers (("Content-Type" . "application/json")) :complete #[128 "\302\300\303\301\"\"\207" [matrix-async-cb-router (#[128 "\302\300\303\301\"\"\207" [matrix-client-sync-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t ... "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" ... ... "alphapapa" ... [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] [eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil ... nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil ... nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :url "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" :response #0) #<killed buffer> "HTTP/1.0 502 Bad Gateway\nCache-Control: no-cache\nConnection: close\nContent-Type: text/html\n" nil curl ("/tmp/emacs-request32113foL")])
  apply(matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #1 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil (("@carmike:matrix.org" (avatar_url) (displayname . "Michael") (membership . "join")) ("@alphapapa:matrix.org" (avatar_url) (displayname . "alphapapa") (membership . "join"))) nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #1 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil (("@alphapapa:matrix.org" (avatar_url) (displayname . "alphapapa") (membership . "join")) ("@baneross:matrix.org" (avatar_url . "mxc://matrix.org/WWPKfhaIJxXLYXUqJtDmrsVm") (displayname . "Bane Ross") (membership . "join"))) nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog (#1) apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446] :data nil :symbol-status error :error-thrown (error http 502) :response [cl-struct-request-response 502 nil nil (error http 502) error "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" nil (:type "GET" :params (("access_token" . "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK") ("since" . "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436") ("timeout" . "30000") ("full_state" . "false")) :parser json-read :data "null" :error #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (... ...) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (... ... ... ... ... ... ... ...) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :headers (("Content-Type" . "application/json")) :complete #[128 "\302\300\303\301\"\"\207" [matrix-async-cb-router (#[128 "\302\300\303\301\"\"\207" [matrix-client-sync-handler ... apply append] 6 "\n\n(fn &rest ARGS2)"] [eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (... ...) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (... ... ... ... ... ... ... ...) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :url "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" :response #1) #<killed buffer> "HTTP/1.0 502 Bad Gateway\nCache-Control: no-cache\nConnection: close\nContent-Type: text/html\n" nil curl ("/tmp/emacs-request32113foL")]))
  #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil (... ...) nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil (... ...) nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog (#3) apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"](:data nil :symbol-status error :error-thrown (error http 502) :response [cl-struct-request-response 502 nil nil (error http 502) error "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" nil (:type "GET" :params (("access_token" . "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK") ("since" . "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436") ("timeout" . "30000") ("full_state" . "false")) :parser json-read :data "null" :error #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil ... nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil ... nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :headers (("Content-Type" . "application/json")) :complete #[128 "\302\300\303\301\"\"\207" [matrix-async-cb-router (#[128 "\302\300\303\301\"\"\207" [matrix-client-sync-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t ... "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" ... ... "alphapapa" ... [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] [eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil ... nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil ... nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :url "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" :response #0) #<killed buffer> "HTTP/1.0 502 Bad Gateway\nCache-Control: no-cache\nConnection: close\nContent-Type: text/html\n" nil curl ("/tmp/emacs-request32113foL")])
  apply(#[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil (... ...) nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil (... ...) nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog (#3) apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] (:data nil :symbol-status error :error-thrown (error http 502) :response [cl-struct-request-response 502 nil nil (error http 502) error "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" nil (:type "GET" :params (("access_token" . "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK") ("since" . "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436") ("timeout" . "30000") ("full_state" . "false")) :parser json-read :data "null" :error #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (... ...) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (... ... ... ... ... ... ... ...) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :headers (("Content-Type" . "application/json")) :complete #[128 "\302\300\303\301\"\"\207" [matrix-async-cb-router (#[128 "\302\300\303\301\"\"\207" [matrix-client-sync-handler ... apply append] 6 "\n\n(fn &rest ARGS2)"] [eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (... ...) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (... ... ... ... ... ... ... ...) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :url "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" :response #1) #<killed buffer> "HTTP/1.0 502 Bad Gateway\nCache-Control: no-cache\nConnection: close\nContent-Type: text/html\n" nil curl ("/tmp/emacs-request32113foL")]))
  apply(apply #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil (... ...) nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil (... ...) nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog (#3) apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] (:data nil :symbol-status error :error-thrown (error http 502) :response [cl-struct-request-response 502 nil nil (error http 502) error "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" nil (:type "GET" :params (("access_token" . "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK") ("since" . "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436") ("timeout" . "30000") ("full_state" . "false")) :parser json-read :data "null" :error #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (... ...) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (... ... ... ... ... ... ... ...) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :headers (("Content-Type" . "application/json")) :complete #[128 "\302\300\303\301\"\"\207" [matrix-async-cb-router (#[128 "\302\300\303\301\"\"\207" [matrix-client-sync-handler ... apply append] 6 "\n\n(fn &rest ARGS2)"] [eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (... ...) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (... ... ... ... ... ... ... ...) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :url "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" :response #1) #<killed buffer> "HTTP/1.0 502 Bad Gateway\nCache-Control: no-cache\nConnection: close\nContent-Type: text/html\n" nil curl ("/tmp/emacs-request32113foL")]))
  request--safe-apply(#[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil (... ...) nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil (... ...) nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog (#3) apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] (:data nil :symbol-status error :error-thrown (error http 502) :response [cl-struct-request-response 502 nil nil (error http 502) error "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" nil (:type "GET" :params (("access_token" . "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK") ("since" . "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436") ("timeout" . "30000") ("full_state" . "false")) :parser json-read :data "null" :error #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (... ...) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (... ... ... ... ... ... ... ...) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :headers (("Content-Type" . "application/json")) :complete #[128 "\302\300\303\301\"\"\207" [matrix-async-cb-router (#[128 "\302\300\303\301\"\"\207" [matrix-client-sync-handler ... apply append] 6 "\n\n(fn &rest ARGS2)"] [eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (... ...) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (... ... ... ... ... ... ... ...) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :url "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" :response #1) #<killed buffer> "HTTP/1.0 502 Bad Gateway\nCache-Control: no-cache\nConnection: close\nContent-Type: text/html\n" nil curl ("/tmp/emacs-request32113foL")]))
  request--callback(#<killed buffer> :type "GET" :params (("access_token" . "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK") ("since" . "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436") ("timeout" . "30000") ("full_state" . "false")) :parser json-read :data "null" :error #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil (... ...) nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil (... ...) nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog (#3) apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :headers (("Content-Type" . "application/json")) :complete #[128 "\302\300\303\301\"\"\207" [matrix-async-cb-router (#[128 "\302\300\303\301\"\"\207" [matrix-client-sync-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (... ...) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (... ... ... ... ... ... ... ...) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] [eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil (... ...) nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil (... ...) nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog (#3) apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :url "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" :response [cl-struct-request-response 502 nil nil (error http 502) error "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" nil (:type "GET" :params (("access_token" . "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK") ("since" . "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436") ("timeout" . "30000") ("full_state" . "false")) :parser json-read :data "null" :error #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil ... nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil ... nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :headers (("Content-Type" . "application/json")) :complete #[128 "\302\300\303\301\"\"\207" [matrix-async-cb-router (#[128 "\302\300\303\301\"\"\207" [matrix-client-sync-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t ... "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" ... ... "alphapapa" ... [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] [eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil ... nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil ... nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :url "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" :response #0) #<killed buffer> "HTTP/1.0 502 Bad Gateway\nCache-Control: no-cache\nConnection: close\nContent-Type: text/html\n" nil curl ("/tmp/emacs-request32113foL")])
  apply(request--callback #<killed buffer> (:type "GET" :params (("access_token" . "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK") ("since" . "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436") ("timeout" . "30000") ("full_state" . "false")) :parser json-read :data "null" :error #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #4 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil ... nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #4 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil ... nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :headers (("Content-Type" . "application/json")) :complete #[128 "\302\300\303\301\"\"\207" [matrix-async-cb-router (#[128 "\302\300\303\301\"\"\207" [matrix-client-sync-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t ... "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" ... ... "alphapapa" ... [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] [eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #4 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil ... nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #4 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil ... nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :url "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" :response [cl-struct-request-response 502 nil nil (error http 502) error "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" nil #0 #<killed buffer> "HTTP/1.0 502 Bad Gateway\nCache-Control: no-cache\nConnection: close\nContent-Type: text/html\n" nil curl ("/tmp/emacs-request32113foL")]))
  request--curl-callback(#<process request curl> "finished\n")

#+END_QUOTE
* Plans

** client-ng

*** UNDERWAY Storing and processing new timeline events
:LOGBOOK:
-  State "UNDERWAY"   from              [2017-11-23 Thu 22:19]
:END:

There are several approaches, and I'm not sure which is best.

**** Run client function for batch of updates

I'm not sure there would be any advantage to this approach unless we were to write a function to rewrite a buffer from a timeline.  But if we were to do that, we could easily do that by re-running the per-event function for each event.

The advantage would be that the API could call a single client function with the room object, and the client could then do whatever updating it wanted.  This avoids duplicating some of the API structure in the client, and seems like a better separation of concerns.

***** Store separate lists of new and old events in API

One of the easiest ways might be to store new events to two lists, old and new, and let the client clear the list of new events when it's processed them.

I think this is what I will try first.  It's almost like keeping an index in a db on a column, and it should be simple for clients.

***** Calculate offset into event list

Store the number of events processed, then when processing new events, calculate an offset into the list, and start processing new events from there.

This is fairly simple and quick, and since events are pushed to the timeline list by order-received, not by origin timestamp, it would work.  But if we ever moved to an ordered list of events, inserting them by timestamp, this would break.  

***** Store a read/processed flag/status for each event

This would be very simple, but, obviously, as the list of events grows, it becomes slower to process.

**** Run client function for each event

This is maybe the simplest, and the most similar to the existing code.  However, it means that the client has to duplicate some of the structure of the API code, because the client has to handle each event differently as well.  Whereas, if we let the API handle events and let the client handle presenting the stored state, it seems like a better separation of concerns.

*** TODO Add more event handlers

It's at the stage now where more event handlers need to be added to fill out functionality.  I should probably do some refactoring and rethinking before this.  Might need to write a macro for client handlers.

