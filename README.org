#+TITLE: [[images/logo64.png]] matrix-client.el

This is a fork of the [[http://doc.rix.si/projects/matrix.el.html][original matrix.el client]] with the intent of maintaining
it further, fixing bugs, and providing long-term goals for the project.

[[https://i.imgur.com/VlzRtEz.png][https://i.imgur.com/VlzRtEz.png]]

* Installation

** Quelpa

[[https://framagit.org/steckerhalter/quelpa][Quelpa]] makes it easy to install Emacs packages directly from source repos, so this is probably how you'll want to install.  We recommend doing it like this:

1.  Install [[https://framagit.org/steckerhalter/quelpa-use-package][quelpa-use-package]] (which can be installed directly from MELPA).
2.  Add this form to your init file:

#+BEGIN_SRC emacs-lisp
  (use-package matrix-client
    :quelpa ((matrix-client :fetcher github :repo "jgkamat/matrix-client-el"
                            :files (:defaults "logo.png" "misc/matrix-client-standalone.el"))))
#+END_SRC

After installation, upgrading must be done manually, e.g. with @@html:<kbd>@@C-u M-x quelpa RET matrix-client RET@@html:</kbd>@@.  If you want to always upgrade to the latest version every time Emacs starts, add the ~:upgrade t~ option, like this:

#+BEGIN_SRC emacs-lisp
  (use-package matrix-client
    :quelpa ((matrix-client :fetcher github :repo "jgkamat/matrix-client-el"
                            :files (:defaults "logo.png" "misc/matrix-client-standalone.el"))
             :upgrade t))
#+END_SRC

** Manually

Simply put this repo's directory onto your ~load-path~, and eval ~(require 'matrix-client)~.  Once the project achieves a sufficiently high quality or demand, it may be submitted to MELPA.

Note that when installing manually, you will also need to manually install all dependencies.

* Usage

Either deploy your own homeserver or register account on the public homeserver
https://matrix.org/beta/#/login . After you've done that, =M-x matrix-client=
will set you up with buffers corresponding to your Matrix rooms. You can join
new ones with /join, leave with /leave or /part, and hook in to the custom
functions provided by =matrix-client=.

Use the ~matrix-client-frame~ command to open a dedicated frame, like this (also seen here is the optional ~matrix-client-rainbow-mode~ that colorizes events according to sender):

[[images/frame-purpose-example.png]]

** Standalone client

A unique feature is that the file =matrix-client-standalone.el= ([[https://github.com/jgkamat/matrix-client-el/blob/master/misc/matrix-client-standalone.el][GitHub link]]) can be executed from a shell as a Bash script.  It accepts these options:

+  =--upgrade=: Upgrade the client to the latest version before connecting.  (This also upgrades the script in the package directory, but any changes to it won't take effect until the next time it's run.)
+  =--debug=: Enable ~debug-on-error~ in the Emacs session.

The script does not load any user configuration files, so it's basically like a clean Emacs config.  However, it does initialize and use the existing Emacs packages directory (e.g. =~/.emacs.d/elpa=), so keep that in mind; any necessary packages will be installed there, and all autoload files will be read.

* Configuration

While there are a lot of configuration settings, here are a selection that are
the most useful:

| Variable                          | Description                           |
|-----------------------------------+---------------------------------------|
| ~matrix-client-show-images~       | Control if images are shown inline    |
| ~matrix-client-render-presence~   | Control display of presence           |
| ~matrix-client-render-membership~ | Control display of membership changes |
| ~matrix-client-use-tracking~      | Enable tracking.el integration        |

Many more settings are documented through customize.

* Contributing

Contributions are much appreciated, and what help this project stay afloat! If
you have an issue, please report it via [[https://github.com/jgkamat/matrix-client-legacy-el/issues][github issues]]. If you have a patch, you
may submit it via [[https://github.com/jgkamat/matrix-client-legacy-el/pulls][a pull request]].

A room for discussion is located at [[https://matrix.to/#/#matrix-client-el:matrix.org][#matrix-client-el:matrix.org]]

Development alerts are available at #matrix-client-el-dev:matrix.org.

* Authors

- [[http://whatthefuck.computer/][Ryan Rix]] - Created the initial matrix-client.el.
- [[https://github.com/alphapapa][alphapapa]] - Images, Performance optimizations, Last seen tracking, and a shiny
  new backend!
- [[https://jgkamat.github.io/][jgkamat]] - Maintenance and reviews.

* License

See LICENSE in the root of the repository for legal information.
